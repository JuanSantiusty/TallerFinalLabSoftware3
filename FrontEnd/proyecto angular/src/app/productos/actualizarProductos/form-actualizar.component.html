<div class="card bg-dark text-white">
  <div class="card-header">{{ titulo }}</div>
  <div class="card-body">

    <form>

      <!-- Nombre -->
      <div class="form-group row mb-3">
        <label class="col-form-label col-sm-2">Nombre</label>
        <div class="col-sm-6">
          <input type="text" class="form-control"
                 [(ngModel)]="producto.nombre" name="nombre" required>
        </div>
      </div>

      <!-- Descripción -->
      <div class="form-group row mb-3">
        <label class="col-form-label col-sm-2">Descripción</label>
        <div class="col-sm-6">
          <textarea class="form-control" rows="3"
                    [(ngModel)]="producto.descripcion" name="descripcion" required></textarea>
        </div>
      </div>

      <!-- Precio -->
      <div class="form-group row mb-3">
        <label class="col-form-label col-sm-2">Precio (COP)</label>
        <div class="col-sm-6">
          <input type="number" class="form-control"
                 [(ngModel)]="producto.precio" name="precio" min="1" required>
        </div>
      </div>

      <!-- Categoría -->
      <div class="form-group row mb-3">
        <label class="col-form-label col-sm-2">Categoría</label>
        <div class="col-sm-6">
          <select class="form-control" [(ngModel)]="producto.idCategoria" name="idCategoria" required>
            <option disabled [ngValue]="0">Seleccione una categoría</option>
            <option *ngFor="let c of categorias" [ngValue]="c.id">
              {{ c.nombre }}
            </option>
          </select>
        </div>
      </div>

      <!-- Disponible -->
      <div class="form-group row mb-3">
        <label class="col-form-label col-sm-2">Disponible</label>
        <div class="col-sm-6 d-flex align-items-center">
          <input type="checkbox" class="form-check-input me-2"
                 [(ngModel)]="producto.estado" name="disponible">
          <span>{{ producto.estado ? 'Sí, está disponible' : 'No está disponible' }}</span>
        </div>
      </div>

      <!-- Imagen (actual + nueva si se cambia) -->
      <div class="form-group row mb-3">
        <label class="col-form-label col-sm-2">Imagen</label>
        <div class="col-sm-6">

          <!-- Input archivo -->
          <input type="file" class="form-control" (change)="onFileChange($event)" accept="image/*">

          <div class="row mt-3 g-3">

            <!-- Imagen actual -->
            <div *ngIf="previewActualUrl" class="col-6 text-center">
              <small>Actual</small>
              <img [src]="previewActualUrl"
                alt="Imagen actual"
                style="max-height: 150px; border-radius: 6px; object-fit: cover; width: 100%;">
            </div>

            <!-- Imagen nueva -->
            <div *ngIf="previewNuevaUrl" class="col-6 text-center">
              <small>Nueva</small>
              <img [src]="previewNuevaUrl"
                alt="Nueva imagen"
                style="max-height: 150px; border-radius: 6px; object-fit: cover; width: 100%;">
            </div>

          </div>

        </div>
      </div>

      <!-- Botón -->
      <div class="form-group row mt-4">
        <div class="col-sm-6">
          <button type="button" class="btn btn-primary" (click)="actualizarProducto()">
            Actualizar
          </button>

          <button type="button" class="btn btn-secondary ms-3" [routerLink]="['/productos/listarProductos']">
            Cancelar
          </button>
        </div>
      </div>

    </form>

  </div>
</div>
