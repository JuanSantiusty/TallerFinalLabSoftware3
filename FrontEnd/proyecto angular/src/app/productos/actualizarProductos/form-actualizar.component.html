<div class="card bg-dark text-white">
  <div class="card-header">{{ titulo }}</div>
  <div class="card-body">

    <form>

      <!-- Nombre -->
      <div class="form-group row mb-3">
        <label class="col-form-label col-sm-2">Nombre</label>
        <div class="col-sm-6">
          <input type="text" class="form-control"
                 [(ngModel)]="producto.nombre" name="nombre">
        </div>
      </div>

      <!-- Descripción -->
      <div class="form-group row mb-3">
        <label class="col-form-label col-sm-2">Descripción</label>
        <div class="col-sm-6">
          <textarea class="form-control" rows="3"
                    [(ngModel)]="producto.descripcion" name="descripcion"></textarea>
        </div>
      </div>

      <!-- Precio -->
      <div class="form-group row mb-3">
        <label class="col-form-label col-sm-2">Precio</label>
        <div class="col-sm-6">
          <input type="number" class="form-control"
                 [(ngModel)]="producto.precio" name="precio" min="1">
        </div>
      </div>

      <!-- Categoría -->
      <div class="form-group row mb-3">
        <label class="col-form-label col-sm-2">Categoría</label>
        <div class="col-sm-6">
          <select class="form-control" [(ngModel)]="producto.idCategoria" name="categoria">
            <option disabled value="0">Seleccione una categoría</option>
            <option *ngFor="let c of categorias" [value]="c.id">
              {{ c.nombre }}
            </option>
          </select>
        </div>
      </div>

      <!-- Imagen (actual + nueva si se cambia) -->
      <div class="form-group row mb-3">
        <label class="col-form-label col-sm-2">Imagen</label>
        <div class="col-sm-6">
          <input type="file" class="form-control" (change)="onFileChange($event)">

          <!-- Vista previa -->
          <div *ngIf="previewUrl" class="mt-3 text-center">
            <img [src]="previewUrl"
                 alt="Vista previa"
                 style="max-height: 180px; border-radius: 6px; object-fit: cover;">
          </div>
        </div>
      </div>

      <!-- Botón -->
      <div class="form-group row mt-4">
        <div class="col-sm-6">
          <button type="button" class="btn btn-primary" (click)="actualizarProducto()">
            Actualizar
          </button>

          <button type="button" class="btn btn-secondary ms-3" [routerLink]="['/productos/listarProductos']">
            Cancelar
          </button>
        </div>
      </div>

    </form>

  </div>
</div>
